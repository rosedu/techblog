<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7 ie" lang="en"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8 ie" lang="en"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9 ie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="no-js"><!--<![endif]-->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ROSEdu Techblog - ifconfig vs iproute2</title>
    <link rel="stylesheet" href="./css/style.css" type="text/css">
    <link rel="stylesheet" href="./css/rosedu_links.css" type="text/css">
    <link rel="stylesheet" href="./css/syntax.css" type="text/css">

    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-7579199-6']);
      _gaq.push(['_trackPageview']);

      (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body>
    <div id="page" class="hentry">
      <header class="the-header">
        <div class="unit-head">
          <div class="unit-inner unit-head-inner">
            <nav class="nav-global">
              <ul>
                <li class="logo"><a href="./" title="Home">ROSEdu Techblog</a></li>
                <li class="about"><a href="./about.html">About</a></li>
                <li class="people"><a href="./people.html">People</a></li>
                <li class="archive"><a href="./archive.html">Archive</a></li>
                <li class="category"><a href="./tags.html">Tags</a></li>
              </ul>
            </nav>

            <hr />

            <nav class="nav-global">
              <ul>
                <li class="logo"><a href="./archive.html" title="Archive">Latest Posts</a></li>
                
                  <li><a href="./cdl-2015.html" title="Application process for the Community Development Lab">Application pro...</a></li>
                
                  <li><a href="./fp-dragons.html" title="Here be Dragons - The Interesting Realm of Floating Point Operations">Here be Dragons...</a></li>
                
                  <li><a href="./daemonizing-processes.html" title="Daemonizing Processes - Part 1">Daemonizing Pro...</a></li>
                
              </ul>
            </nav>
          </div><!-- unit-inner -->
        </div><!-- unit-head -->
      </header>

      <div class="body" role="main">
        <div class="unit-body">
          <div class="unit-inner unit-body-inner">
            <div class="entry-content">
              <article class="unit-article layout-post">
                <div class="unit-inner unit-article-inner">
  <div class="content">
    <div class="bd">
      <header>
        <div class="unit-head">
          <div class="unit-inner unit-head-inner">
            <h1 class="h2 entry-title">
              <a class="post_title" href="./ifconfig-vs-iproute.html" title="ifconfig vs iproute2">ifconfig vs iproute2</a>
            </h1>
          </div><!-- unit-inner -->
        </div><!-- unit-head -->
      </header>

      <span class="date">
      <span class="published">Published on January 17, 2012</span>
      by
      <span class="author"><a href="./people/alexandru-juncu.html">Alexandru Juncu</a></span>
      </span>

      <br />
      <span class="meta">
        Tagged:
        <span class="tags"><a title="All pages tagged 'iproute2'." href="./tags/iproute2.html">iproute2</a>, <a title="All pages tagged 'net-tools'." href="./tags/net-tools.html">net-tools</a>, <a title="All pages tagged 'ifconfig'." href="./tags/ifconfig.html">ifconfig</a>, <a title="All pages tagged 'ip'." href="./tags/ip.html">ip</a>, <a title="All pages tagged 'route'." href="./tags/route.html">route</a>, <a title="All pages tagged 'arp'." href="./tags/arp.html">arp</a>, <a title="All pages tagged 'netlink'." href="./tags/netlink.html">netlink</a>, <a title="All pages tagged 'IPv4'." href="./tags/ipv4.html">IPv4</a>, <a title="All pages tagged 'IPv6'." href="./tags/ipv6.html">IPv6</a></span>
      </span>

      <p>On modern Linux distributions, the users have two main possibilities of configuring the network: <code>ifconfig</code> and <code>ip</code>.</p>
<!--more-->
<p>The <code>ifconfig</code> tool is part of the <code>net-tools</code> package along side other tools like route, arp and netstat. These are the traditional userspace tools for network configuration, made for older Linux kernels.</p>
<p>The <code>iproute2</code> is the new package that comes with the <code>ip</code> tool as replacement for the <code>ifconfig</code>, <code>route</code> and <code>arp</code> commands.</p>
<p>There are pros and cons for each of them and there are users (and fans) of each. Let’s see the differences…</p>
<p>First of all, why was the <code>iproute</code> introduced? There had to have been a need for it… The reason was the introduction of the <a href="http://www.faqs.org/rfcs/rfc3549.html" title="Netlink">Netlink</a> API, which is a socket like interface for accessing kernel information about interfaces, address assignments and routes. The tools like <code>ifconfig</code> used the <code>/proc</code> file hierarchy (<code>procfs</code>) for collecting information. The output was reformatted data from different network related files in <code>/proc</code>.</p>
<pre><code>alexj@hathor ~/techblog $ strace -e open ifconfig eth0 2&gt;&amp;1|grep /proc
open(&quot;/proc/net/dev&quot;, O_RDONLY)         = 6
open(&quot;/proc/net/if_inet6&quot;, O_RDONLY)    = 6</code></pre>
<p>The costs for the operations like open and read from these files were rather big compared for the netlink interface. For comparison, let’s assume that we have a large number of interfaces (128) with IPv4 and IPv6 addresses and their associated connected routes.</p>
<pre><code>alexj@hathor ~/if $ time ifconfig -a &gt;/dev/null 

real	0m1.528s
user	0m0.080s
sys	0m1.420s

alexj@hathor ~/if $ time ip addr show &gt;/dev/null

real	0m0.016s
user	0m0.000s
sys	0m0.012s</code></pre>
<p>But most of normal users are not that geeky to care about millisecond speedup. They do, however, care about usability. And <code>iproute2</code> does seem to have a better user interface. The <code>ip</code> command is better organized, in what it is called <em>objects</em>. Links, addresses, routes, routing rules, tunnels are all objects that can be added, deleted or listed. If a user learns how to add an address, by intuition, he can easily guess how to add a route, for example, because the syntax in similar.</p>
<p>Keyword shortening and auto completion makes the <code>ip</code> command more efficient by removing redundant characters. The following commands are identical as effect:</p>
<pre><code>ip address show
ip address
ip addr show
ip a s
ip a</code></pre>
<p>Some network engineers will like <code>iproute2</code> because it’s similar to Cisco’s IOS: “ip route show” in Linux vs “show ip route” in IOS. Another usability feature is that you have the <code>/number</code> format for subnet masks instead of the quadded-decimal format, the first one being shorter to write and more up to date with the concept of VLSM.</p>
<p>So what does <code>ifconfig</code> still have to keep it around? Its biggest weakness is its biggest strength: its age. <code>ifconfig</code> has been out and used for so long that it’s very hard to put it away. Still many scripts in the heart of Linux distributions rely on <code>ifconfig</code> to work and most system administrators are used to the <code>ifconfig</code> command and it’s hard to move them to something new and unfamiliar. A lot of tutorials on the Internet about network configuration teach <code>ifconfig</code> and not <code>iproute2</code> to beginners. For example, LPIC-1, one of the biggest Linux Certification out there, still requires <code>ifconfig</code> skills for passing the exam and barely mentiones <code>iproute2</code>.</p>
<p>When released, <code>iproute2</code> had at least one advantage over <code>ifconfig</code>, and that was the feature of interacting with the IPv6 stack while <code>ifconfig</code> was only for IPv4. But since then, fans of <code>ifconfig</code> patched it so it could also be IPv6 ready.</p>
<p>But other features were not replicated. In old Linux Kernels, an interface could have only one IP address, so in <code>ifconfig</code> you could configure only one IP address on an interfaces. In newer kernels, each interface has a list of addresses and <code>iproute2</code> via the NetLink interface can manage them. Lastly, <code>ifconfig</code> versions still rely on the idea of subinterfaces to provide more than one address on an interfaces.</p>
<p>So, given all these arguments, <code>iproute2</code> should be declared the winner. But it’s not that easy. Just like in the case of IPv4 vs IPv6, where the latter one is the obvious choice, <code>iproute2</code> will eventually replace <code>ifconfig</code>. Only it’s going to take a long time for that to happen, so <code>net-tools</code> will still be around for some time, but they will be eventually phased out.</p>

    </div>
  </div>
</div>

<!-- Social Buttons here -->
<div id="sociallinks">
  <a href="https://twitter.com/home?status=/ifconfig-vs-iproute.html" target="_blank">Tweet this</a> -
  <a href="http://www.facebook.com/sharer/sharer.php?u=/ifconfig-vs-iproute.html" target="_blank">Like this</a> -
  <a href="https://plus.google.com/share?url=/ifconfig-vs-iproute.html" target="_blank">Share on G+</a>
</div>

<script>
  (function(){window.addEventListener("DOMContentLoaded",function(){
    //get URL
    var url=document.location;
    var links=document.getElementById("sociallinks")
                      .getElementsByTagName('a');
    for (var i=0;i!=links.length;i++){
      // Replacing /ifconfig-vs-iproute.html with current URL
      links[i].setAttribute("href",links[i].href.replace('/ifconfig-vs-iproute.html',url));
    }})})();
</script>
</br>

<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'rosedutechblog';
  var disqus_url = window.location.href.split('/').splice(0,3).join("/")+'/ifconfig-vs-iproute.html';
  var title = 'ifconfig vs iproute2';
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

              </article>
              
            </div>
          </div>
        </div>
      </div>

      <footer class="the-footer">
        <div class="unit-foot">
          <div class="unit-inner unit-foot-inner">
            <div class="misc vcard">
              <h4>Social</h4>
              <div class="rss">
                <a href="http://techblog.rosedu.org/rss.xml" target="_blank">
                  <img src="./images/style/rss.png" alt="Subscribe to RSS Feed" />
                </a>
                <a href="http://www.reddit.com/submit?url='+encodeURIComponent(window.location)" target="_blank" onclick="window.location='http://www.reddit.com/submit?url='+encodeURIComponent(window.location); return false">
                  <img src="./images/style/reddit.png" alt="Submit to Reddit" />
                </a>
                <a href="http://twitter.com/share" class="twitter-share-button" data-count="none" target="_blank">
                  <img src="./images/style/twitter.png" alt="Submit to Twitter" />
                </a>
              </div>

              <h4>Tech</h4>
              <div class="bucket">
                This blog is created by <a class="author fn n" href="http://www.rosedu.org">ROSEdu</a> community using <a class="author fn n" href="http://jaspervdj.be/hakyll">Hakyll</a>. See source on <a href="https://github.com/rosedu/techblog">GitHub</a>.
              </div>

              <h4>License</h4>
              <div class="bucket">
                <span>
                  <a rel="license" href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons Attribution 3.0 License">
                    <img src="//i.creativecommons.org/l/by/3.0/88x31.png" alt="License">
                  </a>
                </span>
                <span>
                  This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/" class="subfoot">Creative Commons Attribution 3.0 License</a>.
                </span>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>
